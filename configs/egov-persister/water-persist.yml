serviceMaps:
 serviceName: Water Connection Service
 mappings:
 - version: 1.0
   name: WaterConnection
   description: create ConnectionDetails in connection and water_service_connection
   fromTopic: save-ws-connection
   isTransaction: true
   queryMaps: 
    - query: INSERT INTO connection (id, tenantid, property_id, applicationno, applicationstatus, status, connectionno, oldconnectionno, documents_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?);
      basePath: $.WaterConnection
      jsonMaps:
       - jsonPath: $.WaterConnection.id 

       - jsonPath: $.WaterConnection.property.tenantId
        
       - jsonPath: $.WaterConnection.property.propertyId

       - jsonPath: $.WaterConnection.applicationNo
        
       - jsonPath: $.WaterConnection.applicationStatus

       - jsonPath: $.WaterConnection.status

       - jsonPath: $.WaterConnection.connectionNo

       - jsonPath: $.WaterConnection.oldConnectionNo
      
       - jsonPath: $.WaterConnection.documents.*.id


       
          

    - query: INSERT INTO water_service_connection(connection_id,connectionCategory,rainWaterHarvesting,connectionType,waterSource,meterId,meterInstallationDate,pipeSize,noOfTaps,uom,waterSubSource,calculationAttribute,connectionexecutiondate) VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?);
      basePath: $.WaterConnection
      jsonMaps:

       - jsonPath: $.WaterConnection.id
       - jsonPath: $.WaterConnection.connectionCategory
         

       - jsonPath: $.WaterConnection.rainWaterHarvesting
         type: BOOLEAN 
         dbType: BOOLEAN
         
       - jsonPath: $.WaterConnection.connectionType
         
       - jsonPath: $.WaterConnection.waterSource
         
       - jsonPath: $.WaterConnection.meterId
         
       - jsonPath: $.WaterConnection.meterInstallationDate

       - jsonPath: $.WaterConnection.pipeSize

       - jsonPath: $.WaterConnection.noOfTaps

       - jsonPath: $.WaterConnection.uom

       - jsonPath: $.WaterConnection.waterSubSource
      
       - jsonPath: $.WaterConnection.calculationAttribute
       
       - jsonPath: $.WaterConnection.connectionExecutionDate

 - version: 1.0
   name: WaterConnection
   description: update ConnectionDetails in connection and water_service_connection
   fromTopic: update-ws-connection
   isTransaction: true
   queryMaps: 
    - query: UPDATE connection SET property_id=?, applicationNo=?, applicationStatus=?, status=?, connectionNo=?, oldConnectionNo=?, documents_id=? WHERE id=?;
      basePath: $.WaterConnection
      jsonMaps:

       - jsonPath: $.WaterConnection.property.propertyId

       - jsonPath: $.WaterConnection.applicationNo
        
       - jsonPath: $.WaterConnection.applicationStatus

       - jsonPath: $.WaterConnection.status

       - jsonPath: $.WaterConnection.connectionNo

       - jsonPath: $.WaterConnection.oldConnectionNo

       - jsonPath: $.WaterConnection.documents.*.id      

    - query: UPDATE water_service_connection SET connectionCategory=?,rainWaterHarvesting=?,connectionType=?,waterSource=?,meterId=?,meterInstallationDate=? WHERE connection_id=?;
      basePath: $.WaterConnection
      jsonMaps:

       
       - jsonPath: $.WaterConnection.connectionCategory
         

       - jsonPath: $.WaterConnection.rainWaterHarvesting
         type: BOOLEAN 
         dbType: BOOLEAN
         
       - jsonPath: $.WaterConnection.connectionType
         
       - jsonPath: $.WaterConnection.waterSource
         
       - jsonPath: $.WaterConnection.meterId
         
       - jsonPath: $.WaterConnection.meterInstallationDate
       - jsonPath: $.WaterConnection.id


